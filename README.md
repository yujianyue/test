# 多TSV文本数据万用查分系统

一个基于Go后端和HTML5+CSS3+JS+AJAX的单文件自适应页面实现的多TSV文本数据查询系统。

## 功能特性

- **多文件支持**: 支持多个TSV数据文件，自动扫描并列出可用文件
- **动态查询条件**: 根据选择的文件自动生成查询条件输入框
- **精准查询**: 支持多条件精准匹配查询
- **验证码保护**: 可配置的4位数字验证码验证
- **分页显示**: 支持大量数据的分页显示
- **多种视图**: 支持横向和竖向表格视图切换
- **图片支持**: 支持图片字段的点击预览
- **链接支持**: 支持链接字段的点击访问确认
- **响应式设计**: 自适应各种屏幕尺寸
- **实时反馈**: 查询结果包含执行时间和内存消耗

## 技术栈

- **后端**: Go (标准库)
- **前端**: HTML5 + CSS3 + JavaScript + AJAX
- **数据格式**: TSV (制表符分隔值)
- **样式**: 现代化渐变设计，响应式布局

## 文件结构

```
.
├── main.go              # Go后端主文件
├── go.mod              # Go模块文件
├── run.sh              # 启动脚本
├── README.md           # 说明文档
└── shujuku/           # 数据文件目录
    ├── students.xls.php    # 学生信息数据
    ├── employees.xls.php   # 员工信息数据
    └── products.xls.php    # 商品信息数据
```

## 配置说明

系统配置在 `main.go` 的 `initConfig()` 函数中：

```go
config = Config{
    Title:   "多输入框都输对精准查询系统(万用查分)",
    Copyr:   "查立得-",
    Jscss:   "V20210909",
    Ismas:   "1",           // 是否启用验证码 (1=是, 0=否)
    Baoha:   "1",           // 是否精准查询 (1=是, 0=否)
    Itiao:   []string{"姓名", "学号", "工号"},  // 查询条件字段
    Ihide:   []string{"密码", "身份证", "身份证号", "身份证号码"},  // 隐藏字段
    Isurl:   []string{"购买地址", "先领优惠券", "领券地址", "网址的列标题"},  // 链接字段
    Isimg:   []string{"商品主图", "产品图片"},  // 图片字段
    Dbdir:   "./shujuku/",  // 数据文件目录
    Dbxls:   ".xls.php",    // 数据文件后缀
    Copyu:   "/",           // 版权链接
    Pagex:   10,            // 每页显示条数
    Pagem:   20,            // 最大显示页数
}
```

## 数据文件格式

TSV数据文件需要遵循以下格式：

1. **第1行**: 系统标题
2. **第2行**: 查询标题
3. **第3行**: 字段名（制表符分隔）
4. **第4行开始**: 数据行（制表符分隔）

示例：
```
学生信息管理系统
学生成绩查询
姓名	学号	班级	语文	数学	英语	总分	排名
张三	2023001	高三(1)班	85	92	78	255	15
李四	2023002	高三(1)班	92	88	95	275	8
```

## 使用方法

1. **启动服务**:
   ```bash
   ./run.sh
   # 或者
   go run main.go
   ```

2. **访问系统**: 打开浏览器访问 `http://localhost:8084`

3. **选择文件**: 从下拉列表中选择要查询的数据文件

4. **输入条件**: 根据显示的查询条件输入相应的值

5. **验证码**: 如果启用了验证码，输入4位数字验证码

6. **查询数据**: 点击"查询数据"按钮执行查询

7. **查看结果**: 查看查询结果，支持横向/竖向表格切换和分页浏览

## API接口

- `GET /` - 主页面
- `GET /?do=list` - 获取文件列表
- `GET /?do=code` - 获取验证码
- `POST /?do=cha` - 执行查询

## 特色功能

### 1. 动态查询条件
系统会根据选择的文件自动分析可用的查询字段，并动态生成相应的输入框。

### 2. 图片预览
对于配置为图片字段的数据，支持点击图片进行全屏预览。

### 3. 链接确认
对于配置为链接字段的数据，点击时会弹出确认对话框，显示完整链接地址。

### 4. 响应式设计
界面采用现代化设计，支持各种屏幕尺寸的自适应显示。

### 5. 实时反馈
查询结果包含执行时间和内存消耗信息，便于性能监控。

## 注意事项

1. 数据文件需要以 `.xls.php` 结尾
2. 文件需要放在 `shujuku` 目录下
3. 确保Go环境已正确安装
4. 系统默认运行在8084端口

## 扩展功能

系统设计具有良好的扩展性，可以轻松添加：
- 更多数据文件格式支持
- 更复杂的查询条件
- 数据导出功能
- 用户权限管理
- 查询历史记录

## 许可证

本项目采用MIT许可证。